// List of icons that can be used in the game
var icons = ["icon://fa-hand-rock-o", "icon://fa-hand-paper-o", "icon://fa-hand-scissors-o"];

// list with actual draw options
var choices = ["Rock", "Paper", "Scissors"];

// list with game results
var game_state = ["Draw", "You win!", "Computer wins!"]

// create variables for user/computer score, init at 0
var playerScore = 0;
var computerScore = 0;

// rock button, player can select to start a new game
onEvent("rockButton","click",function() {
  playGame(choices[0]);
});

// paper button, player can select to start a new game
onEvent("paperButton","click",function() {
  playGame(choices[1]);
});

// scissors button, player can select to start a new game
onEvent("scissorsButton","click",function() {
  playGame(choices[2]);
});

// Whenever a button is pressed, the screen updates. This counts as the
// start of a new RPS match.  This function determines a winner and then
// updates the scores and screen accordingly. 
function playGame(playerChoice) {
  
  // make a choice for the computer randomly
  var computerChoice = randomChoose(choices);

  // based on user and computer choice, determine the winner
  var winner = decideWinner(playerChoice, computerChoice);

  // Update the screen with the correct icon for each player
  setProperty("playerOutput","image",getImage(playerChoice));
  setProperty("computerOutput","image",getImage(computerChoice));
  
  if (winner == game_state[0]) {
    setProperty("gameText", "text", game_state[0]);
  } else if (winner == game_state[1]) {
    setProperty("gameText", "text", game_state[1]);
    playerScore++;
    setProperty("playerScoreOutput","text",playerScore);
  } else if (winner == game_state[2]) {
    setProperty("gameText", "text", game_state[2]);
    computerScore++;
    setProperty("computerScoreOutput", "text", computerScore);    
  }
}

// return the icon associated with the string iconName
function getImage(iconName) {
    var image = "";
    if (iconName == choices[0]) {
      image = icons[0];
    } else if (iconName == choices[1]) {
      image = icons[1];
    } else if (iconName == choices[2]) {
      image = icons[2];
    }
    // LOOK AT THIS, NOT SURE WHAT THIS RETURN IS MEANT TO DO???
    return icons[0];
}

// generates a random number and picks a roll for the computer based on it
function randomChoose(list){
    var randomSelection = list[(randomNumber(0, list.length - 1))];
    return randomSelection;
}

// determines a winner using else-if blocks and user/computer choices
function decideWinner(playerChoice, computerChoice) {
    if (playerChoice == choices[0]) {
      if (computerChoice == choices[1]) {
        results = game_state[2];
      } else if (computerChoice == choices[2]) {
        results = game_state[1];
      } else {
        results = game_state[0];
      }
    } else if (playerChoice == choices[1]) {
      if (computerChoice == choices[0]) {
        results = game_state[1];
      } else if (computerChoice == choices[2]) {
        results = game_state[2];
      } else {
        results = game_state[0];
      }
    } else if (playerChoice == choices[2]) {
      if (computerChoice == choices[0]) {
        results = game_state[2];
      } else if (computerChoice == choices[1]) {
        results = game_state[1];
      } else {
        results = game_state[0];
      }
    }
    return results;
}


